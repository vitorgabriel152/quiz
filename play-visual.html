<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogar Quiz - Quiz Master</title>
<style>
body { font-family:'Poppins',sans-serif; margin:0; padding:0; background:#f0f4f8; display:flex; flex-direction:column; align-items:center; }
header { background:#4a90e2; color:#fff; padding:20px; text-align:center; font-size:28px; font-weight:600; width:100%; position:relative; }
#exit-quiz { position:absolute; right:20px; top:15px; background:#ff3b2d; color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }
main { flex:1; width:100%; max-width:700px; padding:20px; display:flex; flex-direction:column; align-items:center; gap:20px; }
.question-card { background:#fff; width:100%; padding:25px; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,0.2); text-align:center; animation:fadeIn 0.5s forwards; }
.answer-btn { display:block; width:100%; margin:8px 0; padding:12px; border-radius:10px; border:none; cursor:pointer; font-weight:600; transition:0.3s; }
.correct { background:#28a745; color:#fff; }
.wrong { background:#ff3b2d; color:#fff; }
#timer { font-weight:600; color:#333; margin-bottom:10px; }
#confetti { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; }
@keyframes fadeIn { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }
</style>
</head>
<body>
<header>
Quiz
<button id="exit-quiz">Sair</button>
</header>
<main>
    <button onclick="window.location.href='index.html'" class="card-btn" style="margin:10px auto; display:block;">Voltar</button>
<div id="timer"></div>
<div id="question-container"></div>
<div id="confetti"></div>
</main>

<script>
const exitBtn = document.getElementById('exit-quiz');
exitBtn.addEventListener('click', ()=>{ if(confirm('Deseja sair do quiz?')) window.location.href='index.html'; });

const currentIndex = localStorage.getItem('currentQuiz');
const quizzes = JSON.parse(localStorage.getItem('quizzes')) || [];
if(currentIndex===null || !quizzes[currentIndex]) { alert('Quiz não encontrado!'); window.location.href='index.html'; }

const quiz = quizzes[currentIndex];
const questionContainer = document.getElementById('question-container');
const timerEl = document.getElementById('timer');
const confettiEl = document.getElementById('confetti');

let questionNumber = 0;
let score = 0;
let timer;

function startTimer(seconds){
    timerEl.innerText = `Tempo: ${seconds}s`;
    clearInterval(timer);
    timer = setInterval(()=>{
        seconds--;
        timerEl.innerText = `Tempo: ${seconds}s`;
        if(seconds<=0){ clearInterval(timer); nextQuestion(); }
    },1000);
}

function showQuestion(){
    if(questionNumber >= quiz.questions.length){
        alert(`Quiz finalizado!\nPontuação: ${score}/${quiz.questions.length}`);
        window.location.href='index.html';
        return;
    }
    const q = quiz.questions[questionNumber];
    questionContainer.innerHTML = `<div class="question-card"><h3>${q.question}</h3></div>`;
    const qCard = questionContainer.querySelector('.question-card');

    q.answers.forEach((ans,idx)=>{
        const btn = document.createElement('button');
        btn.classList.add('answer-btn');
        btn.innerText = ans.text;
        btn.addEventListener('click',()=>{
            clearInterval(timer);
            if(ans.correct){
                btn.classList.add('correct');
                score++;
                launchConfetti();
                setTimeout(nextQuestion,800);
            } else {
                btn.classList.add('wrong');
                if(confirm('Resposta errada!\nDeseja sair do quiz?')) window.location.href='index.html';
                else setTimeout(nextQuestion,800);
            }
        });
        qCard.appendChild(btn);
    });
    startTimer(15);
}

function nextQuestion(){ questionNumber++; showQuestion(); }

function launchConfetti(){
    // simples confetti visual
    const confetti = document.createElement('div');
    confetti.style.position='absolute';
    confetti.style.width='10px';
    confetti.style.height='10px';
    confetti.style.background=['#f00','#0f0','#00f','#ff0','#f0f','#0ff'][Math.floor(Math.random()*6)];
    confetti.style.top=Math.random()*window.innerHeight+'px';
    confetti.style.left=Math.random()*window.innerWidth+'px';
    confetti.style.borderRadius='50%';
    confettiEl.appendChild(confetti);
    setTimeout(()=>confetti.remove(),1000);
}

showQuestion();
</script>
</body>
</html>

