<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Criar Quiz - Quiz Master</title>
<style>
body { font-family:'Poppins', sans-serif; margin:0; padding:0; background:#f0f4f8; }
header { background:#4a90e2; color:#fff; padding:20px; text-align:center; font-size:28px; font-weight:600; }
main { display:flex; justify-content:center; padding:20px; }
.create-quiz-container { width:100%; max-width:750px; background:#fff; border-radius:20px; padding:30px; box-shadow:0 12px 25px rgba(0,0,0,0.2); }
.create-quiz-container h2 { text-align:center; margin-bottom:25px; }
input[type="text"], select { width:100%; padding:12px; margin-bottom:12px; border-radius:8px; border:1px solid #ccc; font-size:16px; }
.question-block { background:linear-gradient(135deg,#6a11cb,#2575fc); color:#fff; padding:20px; border-radius:12px; margin-bottom:15px; position:relative; animation:fadeIn 0.5s forwards; }
.answers-container { display:flex; flex-direction:column; gap:5px; margin-bottom:10px; }
.hide { display:none; }
.card-btn { background:#28a745; color:#fff; border:none; padding:14px 22px; border-radius:8px; cursor:pointer; font-weight:600; transition:0.3s; margin-top:10px; }
.card-btn:hover { background:#218838; transform:scale(1.05); }
.remove-question-btn { position:absolute; top:10px; right:10px; background:#ff3b2d; border:none; padding:5px 10px; border-radius:5px; cursor:pointer; color:#fff; font-weight:600; }
.card-animate { opacity:0; transform:translateY(20px); animation:fadeIn 0.5s forwards; }
@keyframes fadeIn { to { opacity:1; transform:translateY(0); } }
.questions-count { text-align:right; font-weight:600; margin-bottom:10px; color:#333; }
</style>
</head>
<body>
<header>Quiz Master</header>
<main>
<section class="create-quiz-container">
    <h2>Criar Quiz</h2>
    <a href="index.html" class="card-btn" style="margin-bottom:15px;">Voltar</a>
    <form id="quiz-form">
        <input type="text" id="quiz-name" placeholder="Nome do Quiz" required>
        <div class="questions-count">Perguntas: <span id="questions-number">0</span></div>
        <div id="questions-container"></div>
        <button type="button" class="card-btn" id="add-question-btn">Adicionar Pergunta</button>
        <button type="submit" class="card-btn">Salvar Quiz</button>
    </form>
</section>
</main>

<script>
const addQuestionBtn = document.getElementById('add-question-btn');
const questionsContainer = document.getElementById('questions-container');
const quizForm = document.getElementById('quiz-form');
const questionsNumber = document.getElementById('questions-number');
let questionCount = 0;

function updateQuestionsCount() { questionsNumber.innerText = questionCount; }

function createQuestionBlock() {
    questionCount++;
    updateQuestionsCount();
    const block = document.createElement('div');
    block.classList.add('question-block');
    block.dataset.id = questionCount;
    block.innerHTML = `
        <label>Pergunta ${questionCount}:</label>
        <input type="text" placeholder="Digite a pergunta" required>
        <select class="question-type">
            <option value="multiple">MÃºltipla Escolha</option>
            <option value="truefalse">Verdadeiro/Falso</option>
        </select>
        <div class="answers-container multiple">
            <div class="answer-input"><input type="text" placeholder="Resposta 1" required><input type="radio" name="correct-${questionCount}" required></div>
            <div class="answer-input"><input type="text" placeholder="Resposta 2" required><input type="radio" name="correct-${questionCount}" required></div>
            <div class="answer-input"><input type="text" placeholder="Resposta 3"><input type="radio" name="correct-${questionCount}"></div>
            <div class="answer-input"><input type="text" placeholder="Resposta 4"><input type="radio" name="correct-${questionCount}"></div>
        </div>
        <div class="answers-container truefalse hide">
            <div class="answer-input"><input type="radio" name="tf-${questionCount}" value="true"> Verdadeiro</div>
            <div class="answer-input"><input type="radio" name="tf-${questionCount}" value="false"> Falso</div>
        </div>
        <button type="button" class="remove-question-btn">Remover</button>
    `;
    questionsContainer.appendChild(block);

    const selectType = block.querySelector('.question-type');
    selectType.addEventListener('change', () => {
        block.querySelector('.multiple').classList.toggle('hide', selectType.value === 'truefalse');
        block.querySelector('.truefalse').classList.toggle('hide', selectType.value !== 'truefalse');
    });

    block.querySelector('.remove-question-btn').addEventListener('click', () => {
        block.remove();
        questionCount--;
        updateQuestionsCount();
    });
}

addQuestionBtn.addEventListener('click', createQuestionBlock);

quizForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const quizName = document.getElementById('quiz-name').value;
    const questions = [];
    document.querySelectorAll('.question-block').forEach(block => {
        const questionText = block.querySelector('input[type="text"]').value;
        const type = block.querySelector('.question-type').value;
        let answers = [];
        if(type==="multiple"){
            const radios = block.querySelectorAll('input[type="radio"]');
            block.querySelectorAll('.answer-input input[type="text"]').forEach((ans, idx) => {
                if(ans.value.trim()!==''){
                    answers.push({text:ans.value, correct: radios[idx].checked});
                }
            });
        } else {
            const selected = block.querySelector('input[type="radio"]:checked');
            if(selected) answers.push({text:selected.value, correct:selected.value==="true"});
        }
        questions.push({question:questionText, type, answers});
    });
    const savedQuizzes = JSON.parse(localStorage.getItem('quizzes')) || [];
    savedQuizzes.push({name:quizName, date:new Date().toLocaleString(), questions});
    localStorage.setItem('quizzes', JSON.stringify(savedQuizzes));
    alert('Quiz salvo com sucesso!');
    window.location.href='index.html';
});

createQuestionBlock();
</script>
</body>
</html>

